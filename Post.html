<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AS/Post</title>
    <link rel="stylesheet" href="css/postStyle.css">
</head>
<body>
  <!-- 기타 HTML 요소 생략 -->

  <script>
   // URL에서 게시물 ID를 가져오는 함수
   function getPostIdFromURL() {
      const params = new URLSearchParams(window.location.search);
      return params.get("id"); // ★ URL에서 ID 추출
   }

   // 서버에서 특정 게시물 데이터를 가져오는 함수
   async function fetchPostById(id) {
      try {
          const response = await fetch(`http://localhost:9000/api/notes/${id}`); // ★ GET 요청으로 특정 ID의 게시물 데이터를 가져옴
          if (!response.ok) {
              throw new Error(`Failed to fetch post: ${response.status}`); // 서버 응답 오류가 있는 경우 오류 메시지와 상태 코드를 표시합니다.
          }
          const post = await response.json();

          // 페이지에 게시물 데이터 표시
          document.querySelector('h2.title').textContent = post.title || '제목을 찾을 수 없습니다'; // 서버에서 받아온 제목을 표시합니다.
          document.querySelector('p.contents').textContent = post.contents || '내용을 찾을 수 없습니다'; // 서버에서 받아온 내용을 표시합니다.
      } catch (error) {
          console.error("Error fetching post:", error); // 오류 발생 시 콘솔에 출력
          alert("게시물 데이터를 불러오는 중 오류가 발생했습니다."); // 사용자에게 오류 알림
      }
   }

   // 페이지 로드 시 게시물 ID를 추출하고 데이터를 가져오는 함수 호출
   document.addEventListener("DOMContentLoaded", function() {
      const postId = getPostIdFromURL();
      if (postId) {
          fetchPostById(postId); // ★ 페이지 로드 시 ID를 사용해 데이터 요청
      } else {
          alert("게시물 ID를 찾을 수 없습니다."); // ID가 없을 경우 사용자에게 알림
      }
   });
  </script>
</body>
</html>